# Database
DATABASE_URL="postgresql://datamodule:datamodule@localhost:5432/datamodule?schema=public"

# Postgres (for docker-compose)
POSTGRES_USER=datamodule
POSTGRES_PASSWORD=datamodule
POSTGRES_DB=datamodule
POSTGRES_PORT=5432

# Kalshi API (optional - enables full orderbook access)
# Get your API key from https://kalshi.com/account/profile
KALSHI_API_KEY_ID=
# Option 1: Path to private key file
KALSHI_PRIVATE_KEY_PATH=./kalshi-private-key.pem
# Option 2: Private key as string (replace newlines with \n)
# KALSHI_PRIVATE_KEY_PEM="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----"

# Kalshi ingestion settings (v2.6.3)
# Database batch sizes for chunked processing
KALSHI_DB_BATCH=200
KALSHI_QUOTE_BATCH=500
KALSHI_LATEST_BATCH=100
KALSHI_DB_MIN_BATCH=10
# Enable verbose batch logging
KALSHI_VERBOSE=false
# Prisma engine type (set to "binary" if NAPI errors occur)
# PRISMA_CLIENT_ENGINE_TYPE=binary

# Crypto intraday matching (v2.6.3)
# Time bucket size in minutes (default 15)
CRYPTO_INTRADAY_BUCKET_MIN=15
# Max matches per right market
INTRADAY_MAX_PER_RIGHT=3
# Max matches per left market
INTRADAY_MAX_PER_LEFT=3

# Kalshi API settings
# API base URL (prod by default, set KALSHI_USE_DEMO=true for demo)
# Prod: https://api.elections.kalshi.com/trade-api/v2
# Demo: https://demo-api.kalshi.co/trade-api/v2
KALSHI_BASE_URL=
KALSHI_USE_DEMO=false
# Markets per page (max 1000 per Kalshi API)
KALSHI_MARKETS_LIMIT=1000
# Max pages to fetch (0 = unlimited, fetch all)
KALSHI_MAX_PAGES=0
# Ingestion mode: "markets" = direct /markets endpoint, "catalog" = series->events->markets
KALSHI_MODE=markets
# Comma-separated series tickers to fetch in catalog mode (empty = all)
KALSHI_SERIES_TICKERS=
# Comma-separated series categories to fetch in catalog mode (empty = all)
# Examples: politics,elections,economics,crypto,macro
KALSHI_SERIES_CATEGORIES=
# Event statuses to fetch (comma-separated: open,closed,settled)
KALSHI_EVENTS_STATUS=open,closed
# Include nested markets in events response (catalog mode)
KALSHI_WITH_NESTED_MARKETS=true
# Hard cap on total markets to fetch (safety limit)
KALSHI_GLOBAL_CAP_MARKETS=100000

# Ingestion settings
INGEST_PAGE_SIZE=100
INGEST_MAX_MARKETS=10000
INGEST_INTERVAL_SECONDS=60

# Split mode settings (v1.1)
# Markets are synced less frequently (default 30 min)
MARKETS_REFRESH_SECONDS=1800
# Quotes are synced more frequently (default 60 sec)
QUOTES_REFRESH_SECONDS=60
# How far back to include closed markets for quotes (default 24h)
QUOTES_CLOSED_LOOKBACK_HOURS=24
# Max markets to process per quotes-sync cycle (default 2000)
QUOTES_MAX_MARKETS_PER_CYCLE=2000

# Global dedup settings (used as defaults)
DEDUP_EPSILON=0.001
DEDUP_MIN_INTERVAL_SECONDS=60

# Per-venue dedup settings (v1.1.1)
# Polymarket
DEDUP_EPSILON_POLYMARKET=0.001
DEDUP_MIN_INTERVAL_SECONDS_POLYMARKET=60
# Kalshi
DEDUP_EPSILON_KALSHI=0.001
DEDUP_MIN_INTERVAL_SECONDS_KALSHI=60

# Logging
NODE_ENV=production
